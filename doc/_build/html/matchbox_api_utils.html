

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. MATCHBox API Utils API Documentation &mdash; MATCHBox API Utils 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="MATCHBox API Utils 1.0.0 documentation" href="index.html"/>
        <link rel="prev" title="3. MATCHBox API Utils Helper Scripts" href="helper_scripts.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MATCHBox API Utils
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. MATCHBox API Utils</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#introduction">1.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#installation">1.2. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#requirements">1.3. Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#using-matchbox-api-utils">1.4. Using MATCHBox API Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">2. MATCHBox API Utils Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#module-matchbox">2.1. Module: Matchbox()</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#module-matchdata">2.2. Module: MatchData()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html#toy-example-1">2.2.1. Toy Example #1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#module-treatmentarms">2.3. Module TreatmentArms()</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="helper_scripts.html">3. MATCHBox API Utils Helper Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="helper_scripts.html#matchbox-json-dump-matchbox-json-dump-py">3.1. MATCHBox JSON Dump (matchbox_json_dump.py)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="helper_scripts.html#matchbox-json-dump-help-doc">3.1.1. MATCHBox JSON Dump Help Doc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="helper_scripts.html#map-msn-psn-map-msn-psn-py">3.2. MAP MSN PSN (map_msn_psn.py)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="helper_scripts.html#map-msn-psn-help-doc">3.2.1. MAP MSN PSN Help Doc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="helper_scripts.html#match-variant-frequency-match-variant-frequency-py">3.3. MATCH Variant Frequency (match_variant_frequency.py)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="helper_scripts.html#match-variant-frequency-help-docs">3.3.1. MATCH Variant Frequency Help Docs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="helper_scripts.html#matchbox-patient-summary-matchbox-patient-summary-py">3.4. MATCHBox Patient Summary (matchbox_patient_summary.py)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="helper_scripts.html#matchbox-patient-summary-help-docs">3.4.1. MATCHBox Patient Summary Help Docs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. MATCHBox API Utils API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-matchbox_api_utils.matchbox">4.1. matchbox_api_utils.matchbox module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-matchbox_api_utils.match_data">4.2. matchbox_api_utils.match_data module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-matchbox_api_utils.match_arms">4.3. matchbox_api_utils.match_arms module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MATCHBox API Utils</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>4. MATCHBox API Utils API Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/matchbox_api_utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="matchbox-api-utils-api-documentation">
<h1>4. MATCHBox API Utils API Documentation<a class="headerlink" href="#matchbox-api-utils-api-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-matchbox_api_utils.matchbox">
<span id="matchbox-api-utils-matchbox-module"></span><h2>4.1. matchbox_api_utils.matchbox module<a class="headerlink" href="#module-matchbox_api_utils.matchbox" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="matchbox_api_utils.matchbox.Matchbox">
<em class="property">class </em><code class="descclassname">matchbox_api_utils.matchbox.</code><code class="descname">Matchbox</code><span class="sig-paren">(</span><em>url</em>, <em>creds</em>, <em>make_raw=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/matchbox.html#Matchbox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.matchbox.Matchbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>MATCHBox API Connector Class</p>
<p>Basic connector class to make a call to the API and load the raw data. From
here we pass data, current MatchData or TreatmentArm data to appropiate
calling classes.</p>
<p>Used for calling to the MATCHBox API, loading data and, creating a basic
data structure. Can load a raw MATCHBox API dataset JSON file, or create
one.  Requires credentials, generally acquired from the config file generated
upon package setup.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – API URL for MATCHbox. Generally only using one at the moment,
but possible to add others later.</li>
<li><strong>creds</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – <p>Username and Password credentials obtained from the config
file generated upon setup. Can also just input a dict in the form
of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s1">&#39;username&#39;</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">password</span><span class="o">&gt;</span> <span class="p">}</span>
</pre></div>
</div>
</li>
<li><strong>make_raw</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Make a raw, unprocessed MATCHBox API JSON file. Default
filename will be raw_mb_obj (raw MB patient dataset) or raw_ta_obj (
raw treatment arm dataset) followed by a datestring. Inputting a
a string will save the file with the requested filename.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">MATCHBox API dataset, used in <code class="docutils literal notranslate"><span class="pre">MatchData</span></code> or <code class="docutils literal notranslate"><span class="pre">TreatmentArm</span></code> classes.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-matchbox_api_utils.match_data">
<span id="matchbox-api-utils-match-data-module"></span><h2>4.2. matchbox_api_utils.match_data module<a class="headerlink" href="#module-matchbox_api_utils.match_data" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="matchbox_api_utils.match_data.MatchData">
<em class="property">class </em><code class="descclassname">matchbox_api_utils.match_data.</code><code class="descname">MatchData</code><span class="sig-paren">(</span><em>config_file=None</em>, <em>url=None</em>, <em>creds=None</em>, <em>patient=None</em>, <em>json_db='sys_default'</em>, <em>load_raw=None</em>, <em>make_raw=None</em>, <em>quiet=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>MatchboxData class</p>
<p>Parsed MATCHBox Data from the API as collected from the Matchbox class above.
This class has methods to generate queries, further filtering, and heuristics
on the dataset.</p>
<p>Generate a MATCHBox data object that can be parsed and queried downstream
with some methods.</p>
<p>Can instantiate with either a config JSON file, which contains the url,
username, and password information needed to access the resource, or by
supplying the individual arguments to make the connection.  This class will
call the Matchbox class in order to make the connection and deploy the data.</p>
<p>Can do a live query to get data in real time, or load a MATCHBox JSON file
derived from the <code class="docutils literal notranslate"><span class="pre">matchbox_json_dump.py</span></code> script that is a part of the
package.  Since data in MATCHBox is relatively static these days, it’s
preferred to use an existing JSON DB and only periodically update the DB with
a call to the aforementioned script.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config_file</strong> (<em>file</em>) – Custom config file to use if not using system
default.</li>
<li><strong>url</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – MATCHBox API URL to use if not using a config file.</li>
<li><strong>creds</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – <p>MATCHBox credentials to use if not using a config file.
Needs to be in the form of:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">{'username':&lt;username&gt;,</span> <span class="pre">'password':&lt;password&gt;}</span></code></div></blockquote>
</li>
<li><strong>patient</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Limit data to a specific PSN.</li>
<li><strong>json_db</strong> (<em>file</em>) – MATCHbox processed JSON file containing the whole
dataset. This is usually generated from ‘matchbox_json_dump.py’.
The default value is <code class="docutils literal notranslate"><span class="pre">'sys_default'</span></code> which loads the default
package data. If you wish you get a live call, set this variable
to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</li>
<li><strong>load_raw</strong> (<em>file</em>) – Load a raw API dataset rather than making a fresh
call to the API. This is intended for dev purpose
only and will be disabled.</li>
<li><strong>make_raw</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Make a raw API JSON dataset for dev purposes only.</li>
<li><strong>quiet</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If True, suppress module output debug, information, etc.
messages.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_patient_meta">
<code class="descname">get_patient_meta</code><span class="sig-paren">(</span><em>psn</em>, <em>val=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_patient_meta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_patient_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Return data for a patient based on a metadata field name. Sometimes we
may want to just get a quick bit of data or field for a patient record
rather than a whole analysis, and this can be a convenient way to just
check a component rather than writing a method to get each and every bit
out. If no metaval is entered, will return the whole patient dict.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function is more for debugging and troubleshooting that for real
functionality.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>psn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – PSN of patient for which we want to receive data.</li>
<li><strong>val</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Optional metaval of data we want. If no entered, will
return the entire patient record.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Either return dict of data if a metaval entered, or whole patient
record. Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if no data for a particular record and raises
and error if the metaval is not valid for the dataset.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_biopsy_summary">
<code class="descname">get_biopsy_summary</code><span class="sig-paren">(</span><em>category=None</em>, <em>ret_type='counts'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_biopsy_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_biopsy_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dict of patients registered in MATCHBox with biopsy and sequencing
information.</p>
<p>Categories returned are total PSNs issued (including outside
assay patients), total passed biopsies, total failed biopsies (per MDACC
message), total MSNs (only counting latest MSN if more than one issued to
a biopsy due to a failure) as a method of figuring out how many NAs were
prepared, and total with sequencing data.</p>
<p>Can filter output based on any one criteria by leveraging the <code class="docutils literal notranslate"><span class="pre">category</span></code>
variable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>catetory</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>biopsy category to return. Valid categories are:</p>
<ul>
<li>pass</li>
<li>failed_biopsy</li>
<li>sequenced</li>
<li>outside</li>
<li>outside_confirmation</li>
<li>progression</li>
<li>initial</li>
</ul>
</li>
<li><strong>ret_type</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Data type to return. Valid types are “counts” and
“ids”, where counts is the total number in that category, and
ids are the BSNs for the category. Default is “counts”</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Whole set of category : count or single category : count data.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>Fix examples.</li>
</ul>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get_biopsy_summary</span><span class="p">())</span>
<span class="go">{u&#39;sequenced&#39;: 5620, u&#39;msns&#39;: 5620, u&#39;progression&#39;: 9,</span>
<span class="go">    u&#39;initial&#39;: 5563, u&#39;patients&#39;: 6491, u&#39;outside&#39;: 61,</span>
<span class="go">    u&#39;no_biopsy&#39;: 465, u&#39;failed_biopsy&#39;: 574, u&#39;pass&#39;: 5654,</span>
<span class="go">    u&#39;outside_confirmation&#39;: 21}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.matchbox_dump">
<code class="descname">matchbox_dump</code><span class="sig-paren">(</span><em>filename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.matchbox_dump"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.matchbox_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump a parsed MATCHBox dataset.</p>
<p>Call to the API and make a JSON file that can later be loaded in, rather
than making an API call and reprocessing. Useful for quicker look ups as
the API call can be very, very slow with such a large DB.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a different dataset than the raw dump.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>Filename to use for output. Default filename is:</p>
<p><code class="docutils literal notranslate"><span class="pre">mb_obj_&lt;date_generated&gt;.json</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">MATCHBox API JSON file.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">json</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_psn">
<code class="descname">get_psn</code><span class="sig-paren">(</span><em>msn=None</em>, <em>bsn=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_psn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_psn" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a patient PSN from either an input MSN or BSN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>msn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – A MSN number to query.</li>
<li><strong>bsn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – A BSN number to query.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A PSN that maps to the MSN or BSN input.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">get_psn</span><span class="p">(</span><span class="n">bsn</span><span class="o">=</span><span class="s1">&#39;T-17-000550&#39;</span><span class="p">))</span>
<span class="go">PSN14420</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_msn">
<code class="descname">get_msn</code><span class="sig-paren">(</span><em>psn=None</em>, <em>bsn=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_msn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_msn" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a patient MSN from either an input PSN or BSN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>psn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – A MSN number to query.</li>
<li><strong>bsn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – A BSN number to query.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There can always be more than 1 MSN per patient, but can only
ever be 1 MSN per biopsy at a time.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of MSNs that correspond with the input PSN or BSN.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">get_msn</span><span class="p">(</span><span class="n">bsn</span><span class="o">=</span><span class="s1">&#39;T-17-000550&#39;</span><span class="p">))</span>
<span class="go">[u&#39;MSN44180&#39;]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">get_msn</span><span class="p">(</span><span class="n">bsn</span><span class="o">=</span><span class="s1">&#39;T-16-000811&#39;</span><span class="p">))</span>
<span class="go">[u&#39;MSN18184&#39;]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">get_msn</span><span class="p">(</span><span class="n">psn</span><span class="o">=</span><span class="s1">&#39;11583&#39;</span><span class="p">))</span>
<span class="go">[u&#39;MSN18184&#39;, u&#39;MSN41897&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_bsn">
<code class="descname">get_bsn</code><span class="sig-paren">(</span><em>psn=None</em>, <em>msn=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_bsn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_bsn" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a patient BSN from either an input PSN or MSN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>psn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – A PSN number to query.</li>
<li><strong>msn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – A MSN number to query.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Can have more than one BSN per PSN, but can only ever have
one BSN / MSN.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list BSNs that correspond to the PSN or MSN input.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">get_bsn</span><span class="p">(</span><span class="n">psn</span><span class="o">=</span><span class="s1">&#39;14420&#39;</span><span class="p">))</span>
<span class="go">[u&#39;T-17-000550&#39;]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">get_bsn</span><span class="p">(</span><span class="n">psn</span><span class="o">=</span><span class="s1">&#39;11583&#39;</span><span class="p">))</span>
<span class="go">[u&#39;T-16-000811&#39;, u&#39;T-17-000333&#39;]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">get_bsn</span><span class="p">(</span><span class="n">msn</span><span class="o">=</span><span class="s1">&#39;18184&#39;</span><span class="p">))</span>
<span class="go">[u&#39;T-16-000811&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_disease_summary">
<code class="descname">get_disease_summary</code><span class="sig-paren">(</span><em>query_disease=None</em>, <em>query_medra=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_disease_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_disease_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a summary of registered diseases and counts. With no args, will
return a list of all diseases and counts as a dict. One can also limit
output to a list of diseases or medra codes and get counts for those only.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query_disease</strong> (<em>list</em>) – List of diseases to filter on.</li>
<li><strong>query_medra</strong> (<em>list</em>) – List of MEDRA codes to filter on.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>Dictionary of disease(s) and counts in the form of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">medra_code</span> <span class="p">:</span> <span class="p">(</span><span class="n">ctep_term</span><span class="p">,</span> <span class="n">count</span><span class="p">)}</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>Data is good but should try to filter outside assay data, failed
specimens, and progression biopsies (collapsed into one count) to
get a value that is closer to the accepted final count.</li>
</ul>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">get_disease_summary</span><span class="p">(</span><span class="n">query_medra</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;10006190&#39;</span><span class="p">])</span>
<span class="go">{&#39;10006190&#39;: (u&#39;Invasive breast carcinoma&#39;, 641)}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">get_disease_summary</span><span class="p">(</span><span class="n">query_disease</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Invasive breast carcinoma&#39;</span><span class="p">])</span>
<span class="go">{u&#39;10006190&#39;: (&#39;Invasive breast carcinoma&#39;, 641)}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">get_disease_summary</span><span class="p">(</span><span class="n">query_medra</span><span class="o">=</span><span class="p">[</span><span class="mi">10006190</span><span class="p">,</span><span class="mi">10024193</span><span class="p">,</span><span class="mi">10014735</span><span class="p">])</span>
<span class="go">{&#39;10006190&#39;: (u&#39;Invasive breast carcinoma&#39;, 641),</span>
<span class="go"> &#39;10014735&#39;: (u&#39;Endometrioid endometrial adenocarcinoma&#39;, 124),</span>
<span class="go">  &#39;10024193&#39;: (u&#39;Leiomyosarcoma (excluding uterine leiomyosarcoma)&#39;, 57)}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_histology">
<code class="descname">get_histology</code><span class="sig-paren">(</span><em>psn=None</em>, <em>msn=None</em>, <em>bsn=None</em>, <em>outside=False</em>, <em>no_disease=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_histology"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_histology" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dict of PSN:Disease for valid biopsies.  Valid biopsies can
are defined as being only <cite>Passed</cite> and can not be <cite>Failed</cite>, <cite>No Biopsy</cite> or
outside assay biopsies at this time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>psn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Optional PSN or comma separated list of PSNs on which
to filter data.</li>
<li><strong>bsn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Optional BSN or comma separated list of BSNs on which
to filter data.</li>
<li><strong>msn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Optional MSN or comma separated list of MSNs on which
to filter data.</li>
<li><strong>outside</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Also include outside assay data. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></li>
<li><strong>no_disease</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Return all data, even if there is no disease
indicated for the patient specimen. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Dict of ID : Disease mappings. If no match for input ID,
returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">get_histology</span><span class="p">(</span><span class="n">psn</span><span class="o">=</span><span class="s1">&#39;11352&#39;</span><span class="p">)</span>
<span class="go">{&#39;PSN11352&#39;: u&#39;Serous endometrial adenocarcinoma&#39;}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">get_histology</span><span class="p">(</span><span class="n">msn</span><span class="o">=</span><span class="mi">3060</span><span class="p">)</span>
<span class="go">No result for id MSN3060</span>
<span class="go">{&#39;MSN3060&#39;: None}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.find_variant_frequency">
<code class="descname">find_variant_frequency</code><span class="sig-paren">(</span><em>query</em>, <em>query_patients=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.find_variant_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.find_variant_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Find and return variant hit rates.</p>
<p>Based on an input query in the form of a <cite>variant_type : gene</cite> dict,
where the gene value can be a list of genes, output a list of patients
that had hits in those gene with some disease and variant information.</p>
<p>The return val will be unique to a patient. So, in the cases where we
have multiple biopsies from the same patient (an intitial and progression
re-biopsy for example), we will only get the union of the two sets, and
duplicate variants will not be output.  This will preven the hit rate from
getting over inflated.  Also, there is no sequence specific information
output in this version (i.e. no VAF, Coverage, etc.).  Sequence level
information for a call can be obtained from the method <a class="reference internal" href="#get-variant-report">get_variant_report</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – <p>Dictionary of variant_type: gene mappings where:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span>  <span class="n">variant</span> <span class="nb">type</span> <span class="ow">is</span> <span class="n">one</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">of</span> <span class="s1">&#39;snvs&#39;</span><span class="p">,</span> <span class="s1">&#39;indels&#39;</span><span class="p">,</span> <span class="s1">&#39;fusions&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cnvs&#39;</span>
<span class="o">-</span>  <span class="n">gene</span> <span class="ow">is</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">genes</span> <span class="n">to</span> <span class="n">query</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><strong>query_patients</strong> (<em>list</em>) – List of patients for which we want to obtain
data.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Return a dict of matching data with disease and MOI information,
along with a count of the number of patients queried and the
number of biopsies queried.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;snvs&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;BRAF&#39;</span><span class="p">,</span><span class="s1">&#39;MTOR&#39;</span><span class="p">],</span> <span class="s1">&#39;indels&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;BRAF&#39;</span><span class="p">,</span> <span class="s1">&#39;MTOR&#39;</span><span class="p">]}</span>
<span class="go">find_variant_frequency(query)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">find_variant_frequency</span><span class="p">({</span><span class="s1">&#39;snvs&#39;</span><span class="p">:[</span><span class="s1">&#39;EGFR&#39;</span><span class="p">],</span> <span class="s1">&#39;indels&#39;</span><span class="p">:[</span><span class="s1">&#39;EGFR&#39;</span><span class="p">]},</span> <span class="p">[</span><span class="mi">15232</span><span class="p">]))</span>
<span class="go">({&#39;15232&#39;: {&#39;bsns&#39;: [u&#39;T-17-001423&#39;],</span>
<span class="go">            &#39;disease&#39;: u&#39;Lung adenocarcinoma&#39;,</span>
<span class="go">            &#39;mois&#39;: [{&#39;alternative&#39;: u&#39;T&#39;,</span>
<span class="go">                      &#39;amoi&#39;: [u&#39;EAY131-E(i)&#39;, u&#39;EAY131-A(e)&#39;],</span>
<span class="go">                      &#39;chromosome&#39;: u&#39;chr7&#39;,</span>
<span class="go">                      &#39;confirmed&#39;: True,</span>
<span class="go">                      &#39;exon&#39;: u&#39;20&#39;,</span>
<span class="go">                      &#39;function&#39;: u&#39;missense&#39;,</span>
<span class="go">                      &#39;gene&#39;: u&#39;EGFR&#39;,</span>
<span class="go">                      &#39;hgvs&#39;: u&#39;c.2369C&gt;T&#39;,</span>
<span class="go">                      &#39;identifier&#39;: u&#39;COSM6240&#39;,</span>
<span class="go">                      &#39;oncominevariantclass&#39;: u&#39;Hotspot&#39;,</span>
<span class="go">                      &#39;position&#39;: u&#39;55249071&#39;,</span>
<span class="go">                      &#39;protein&#39;: u&#39;p.Thr790Met&#39;,</span>
<span class="go">                      &#39;reference&#39;: u&#39;C&#39;,</span>
<span class="go">                      &#39;transcript&#39;: u&#39;NM_005228.3&#39;,</span>
<span class="go">                      &#39;type&#39;: u&#39;snvs_indels&#39;},</span>
<span class="go">                     {&#39;alternative&#39;: u&#39;-&#39;,</span>
<span class="go">                      &#39;amoi&#39;: [u&#39;EAY131-A(i)&#39;],</span>
<span class="go">                      &#39;chromosome&#39;: u&#39;chr7&#39;,</span>
<span class="go">                      &#39;confirmed&#39;: True,</span>
<span class="go">                      &#39;exon&#39;: u&#39;19&#39;,</span>
<span class="go">                      &#39;function&#39;: u&#39;nonframeshiftDeletion&#39;,</span>
<span class="go">                      &#39;gene&#39;: u&#39;EGFR&#39;,</span>
<span class="go">                      &#39;hgvs&#39;: u&#39;c.2240_2257delTAAGAGAAGCAACATCTC&#39;,</span>
<span class="go">                      &#39;identifier&#39;: u&#39;COSM12370&#39;,</span>
<span class="go">                      &#39;oncominevariantclass&#39;: u&#39;Hotspot&#39;,</span>
<span class="go">                      &#39;position&#39;: u&#39;55242470&#39;,</span>
<span class="go">                      &#39;protein&#39;: u&#39;p.Leu747_Pro753delinsSer&#39;,</span>
<span class="go">                      &#39;reference&#39;: u&#39;TAAGAGAAGCAACATCTC&#39;,</span>
<span class="go">                      &#39;transcript&#39;: u&#39;NM_005228.3&#39;,</span>
<span class="go">                      &#39;type&#39;: u&#39;snvs_indels&#39;}],</span>
<span class="go">            &#39;msns&#39;: [u&#39;MSN52258&#39;],</span>
<span class="go">            &#39;psn&#39;: u&#39;15232&#39;}},</span>
<span class="go">1)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_variant_report">
<code class="descname">get_variant_report</code><span class="sig-paren">(</span><em>psn=None</em>, <em>msn=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_variant_report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_variant_report" title="Permalink to this definition">¶</a></dt>
<dd><p id="get-variant-report">Input a PSN or MSN <strong>(preferred!)</strong> and return a list of dicts of variant
call data.</p>
<p>Since there can be more than one MSN per patient, one will get a more
robust result by querying on a MSN.  That is, only one variant report
per MSN can be generated and the results, then, will be clear.  In the
case of querying by PSN, a variant report for each MSN under that PSN,
assuming that the MSN is associated with a variant report, will be
returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>msn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – MSN for which a variant report should be returned.</li>
<li><strong>psn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – PSN for which the variant reports should be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>List of dicts of variant results.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msn</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;singleNucleotideVariants&#39;</span> <span class="p">:</span> <span class="p">[{</span><span class="n">var_data</span><span class="p">}],</span>
    <span class="s1">&#39;copyNumberVariants&#39;</span> <span class="p">:</span> <span class="p">[{</span><span class="n">var_data</span><span class="p">},{</span><span class="n">var_data</span><span class="p">}],</span> <span class="n">etc</span><span class="o">.</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">Add examples here.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_patient_ta_status">
<code class="descname">get_patient_ta_status</code><span class="sig-paren">(</span><em>psn=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_patient_ta_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_patient_ta_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Input a list of PSNs and return information about the treatment arm(s)
to which they were assigned, if they were assigned to any arms. If no PSN
list is passed to the function, return results for every PSN in the study.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>psn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – PSN string to query.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Dict of Arm IDs with last status.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">get_patient_ta_status</span><span class="p">(</span><span class="n">psn</span><span class="o">=</span><span class="mi">10837</span><span class="p">)</span>
<span class="go">{u&#39;EAY131-Z1A&#39;: u&#39;ON_TREATMENT_ARM&#39;}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">get_patient_ta_status</span><span class="p">(</span><span class="n">psn</span><span class="o">=</span><span class="mi">11889</span><span class="p">)</span>
<span class="go">{u&#39;EAY131-IX1&#39;: u&#39;FORMERLY_ON_ARM_OFF_TRIAL&#39;,</span>
<span class="go">        u&#39;EAY131-I&#39;: u&#39;COMPASSIONATE_CARE&#39;}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">get_patient_ta_status</span><span class="p">(</span><span class="n">psn</span><span class="o">=</span><span class="mi">10003</span><span class="p">)</span>
<span class="go">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_patients_by_disease">
<code class="descname">get_patients_by_disease</code><span class="sig-paren">(</span><em>histology=None</em>, <em>medra_code=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_patients_by_disease"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_patients_by_disease" title="Permalink to this definition">¶</a></dt>
<dd><p>Input a disease and return a list of patients that were registered with
that disease type. For histology query, we can do partial matching based
on the python <code class="docutils literal notranslate"><span class="pre">in</span></code> function. So, if one were to query <cite>Lung
Adenocarcinoma</cite>, <cite>Lung</cite> , <cite>Lung Adeno</cite>, or <cite>Adeno</cite>, all Lung Adenocarinoma
cases would be returned.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Simply inputting <cite>Lung</cite>, would also return <cite>Non-small Cell Lung
Adenocarinoma</cite>, <cite>Squamous Cell Lung Adenocarcinoma</cite>, etc, and querying
<cite>Adeno</cite> would return anything that had <cite>adeno</cite>. So, care must be taken
with the query, and secondary filtering may be necessary. Querying
based on MEDRA codes is specific and only an exact match will return
results; <strong>This is the preferred method.</strong></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>histology</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – One of the CTEP shotname disease codes.</li>
<li><strong>medra_code</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – A MEDRA code to query rather than histology.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Dict of Patient : Histology Mapping</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">&lt;</span><span class="n">put</span> <span class="n">example</span> <span class="n">here</span><span class="o">&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_patients_by_arm">
<code class="descname">get_patients_by_arm</code><span class="sig-paren">(</span><em>arm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_patients_by_arm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_patients_by_arm" title="Permalink to this definition">¶</a></dt>
<dd><p>Input an official NCI-MATCH arm identifier (e.g. <cite>EAY131-A</cite>) and return
a set of patients that have ever qualified for the arm based on variant
level data.  This not only includes patients <cite>ON_TREATMENT_ARM</cite>, but also
<cite>FORMERLY_ON_ARM_OFF_TRIAL</cite> and even <cite>COMPASSIONATE_CARE</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>arm</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – One of the official NCI-MATCH arm identifiers.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of tuples of patient, arm, and arm_status.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_patients_by_arm</span><span class="p">(</span><span class="n">arm</span><span class="o">=</span><span class="s1">&#39;EAY131-E&#39;</span><span class="p">))</span>
<span class="go">[</span>
<span class="go">    (u&#39;11476&#39;, &#39;EAY131-E&#39;, u&#39;OFF_TRIAL_DECEASED&#39;),</span>
<span class="go">    (u&#39;14343&#39;, &#39;EAY131-E&#39;, u&#39;FORMERLY_ON_ARM_OFF_TRIAL&#39;),</span>
<span class="go">    (u&#39;10626&#39;, &#39;EAY131-E&#39;, u&#39;ON_TREATMENT_ARM&#39;),</span>
<span class="go">    (u&#39;14256&#39;, &#39;EAY131-E&#39;, u&#39;ON_TREATMENT_ARM&#39;),</span>
<span class="go">    (u&#39;16472&#39;, &#39;EAY131-E&#39;, u&#39;FORMERLY_ON_ARM_OFF_TRIAL&#39;)</span>
<span class="go">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_data.MatchData.get_ihc_results">
<code class="descname">get_ihc_results</code><span class="sig-paren">(</span><em>psn=None</em>, <em>msn=None</em>, <em>bsn=None</em>, <em>assays=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_data.html#MatchData.get_ihc_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_data.MatchData.get_ihc_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the IHC results for a patient.</p>
<p>Input a PSN, MSN, or BSN and / or a set of IHC assays, and return a dict
of data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>psn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Query the data by PSN.</li>
<li><strong>msn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Query the data by MSN.</li>
<li><strong>bsn</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Query the data by BSN.</li>
<li><strong>assay</strong> (<em>list</em>) – IHC assay for which we want to return results. If no
assay is passed, will return all IHC assay results.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Multiple results will be returned since there can be more than
one MSN / PSN.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dict of lists containing the MSN and all IHC assays available
for the specimen.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">get_ihc_results</span><span class="p">(</span><span class="n">msn</span><span class="o">=</span><span class="s1">&#39;MSN30791&#39;</span><span class="p">)</span>
<span class="go">{&#39;MSN30791&#39;: {&#39;MLH1&#39;: u&#39;POSITIVE&#39;,</span>
<span class="go">              &#39;MSH2&#39;: u&#39;POSITIVE&#39;,</span>
<span class="go">              &#39;PTEN&#39;: u&#39;POSITIVE&#39;,</span>
<span class="go">              &#39;RB&#39;: u&#39;ND&#39;}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_ihc_results</span><span class="p">(</span><span class="n">bsn</span><span class="o">=</span><span class="s1">&#39;T-16-002222&#39;</span><span class="p">,</span> <span class="n">assays</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PTEN&#39;</span><span class="p">])</span>
<span class="go">{u&#39;MSN30791&#39;: {&#39;PTEN&#39;: u&#39;POSITIVE&#39;}}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-matchbox_api_utils.match_arms">
<span id="matchbox-api-utils-match-arms-module"></span><h2>4.3. matchbox_api_utils.match_arms module<a class="headerlink" href="#module-matchbox_api_utils.match_arms" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="matchbox_api_utils.match_arms.TreatmentArms">
<em class="property">class </em><code class="descclassname">matchbox_api_utils.match_arms.</code><code class="descname">TreatmentArms</code><span class="sig-paren">(</span><em>config_file=None</em>, <em>url=None</em>, <em>creds=None</em>, <em>json_db='sys_default'</em>, <em>load_raw=None</em>, <em>make_raw=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_arms.html#TreatmentArms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_arms.TreatmentArms" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p><strong>NCI-MATCH Treatment Arms and aMOIs Class</strong></p>
<p>Generate a MATCHBox treatment arms object that can be parsed and queried
downstream.</p>
<p>Can instantiate with either a config JSON file, which contains the url,
username, and password information needed to access the resource, or by
supplying the individual arguments to make the connection.  This class
will call the Matchbox class in order to make the connection and deploy
the data.</p>
<p>Can do a live query to get data in real time, or load a MATCHBox JSON file
derived from the matchbox_json_dump.py script that is a part of the package.
Since data in MATCHBox is relatively static these days, it’s preferred to
use an existing JSON DB and only periodically update the DB with a call
to the aforementioned script.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config_file</strong> (<em>file</em>) – Custom config file to use if not using system default.</li>
<li><strong>url</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – MATCHBox API URL to use.</li>
<li><strong>creds</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – <p>MATCHBox credentials to use. Needs to be in the form of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s1">&#39;username&#39;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">password</span><span class="o">&gt;</span> <span class="p">}</span>
</pre></div>
</div>
</li>
<li><strong>json_db</strong> (<em>file</em>) – MATCHbox processed JSON file containing the whole
dataset. This is usually generated from <code class="docutils literal notranslate"><span class="pre">'matchbox_json_dump.py'</span></code>.
The default value is <code class="docutils literal notranslate"><span class="pre">'sys_default'</span></code> which loads the default package
data. If you wish you get a live call, set this
variable to <cite>“None”</cite>.</li>
<li><strong>load_raw</strong> (<em>file</em>) – Load a raw API dataset rather than making a fresh call
to the API. This is intended for dev purpose only and will be
disabled in production.</li>
<li><strong>make_raw</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Make a raw API JSON dataset for dev purposes only.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">MATCH Treatment Arms object of data and methods.</p>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="matchbox_api_utils.match_arms.TreatmentArms.ta_json_dump">
<code class="descname">ta_json_dump</code><span class="sig-paren">(</span><em>amois_filename=None</em>, <em>ta_filename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_arms.html#TreatmentArms.ta_json_dump"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_arms.TreatmentArms.ta_json_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the TreatmentArms data to a JSON file that can be easily loaded
downstream. We will make both the treatment arms object, as well as the
amois lookup table object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>amois_filename</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Name of aMOI lookup JSON file. <strong>Default:</strong>
<cite>amoi_lookup_&lt;datestring&gt;.json</cite></li>
<li><strong>ta_filename</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Name of TA object JSON file <strong>Default:</strong>
<cite>ta_obj_&lt;datestring&gt;.json</cite></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ta_obj_&lt;date&gt;.json
amois_lookup_&lt;date&gt;.json</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">json</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_arms.TreatmentArms.make_match_arms_db">
<code class="descname">make_match_arms_db</code><span class="sig-paren">(</span><em>api_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_arms.html#TreatmentArms.make_match_arms_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_arms.TreatmentArms.make_match_arms_db" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Make a database of MATCH Treatment Arms</strong></p>
<p>Read in raw API data and create pared down JSON structure that can be
easily parsed later one.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>api_data</strong> (<em>json</em>) – Entire raw MATCHBox API retrieved dataset.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">All Arm data.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">json</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_arms.TreatmentArms.map_amoi">
<code class="descname">map_amoi</code><span class="sig-paren">(</span><em>variant</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_arms.html#TreatmentArms.map_amoi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_arms.TreatmentArms.map_amoi" title="Permalink to this definition">¶</a></dt>
<dd><p>Input a variant dict derived from some kind and return either an aMOI id
in the form of Arm(i|e). If variant is not an aMOI, returns <code class="docutils literal notranslate"><span class="pre">'None'</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>variant</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – <p>Variant dict to annotate.  Dict must have the
following keys in order to be valid:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="nb">type</span> <span class="p">:</span> <span class="p">[</span><span class="n">snvs_indels</span><span class="p">,</span> <span class="n">cnvs</span><span class="p">,</span> <span class="n">fusions</span><span class="p">]</span>
<span class="o">-</span> <span class="n">oncomineVariantClass</span>
<span class="o">-</span> <span class="n">gene</span>
<span class="o">-</span> <span class="n">identifier</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="n">variant</span> <span class="n">ID</span> <span class="p">(</span><span class="n">COSM476</span><span class="p">))</span>
<span class="o">-</span> <span class="n">exon</span>
<span class="o">-</span> <span class="n">function</span>
</pre></div>
</div>
<p>Not all variant types will have meaningful data for these fields,
and so fields may be padded with a null char (e.g. ‘.’, ‘-‘, ‘NA’,
etc.).</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Returns</dt>
<dd>list:  Arm ID(s) with (i)nclusion or (e)xclusion information.</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">variant</span> <span class="o">=</span> <span class="p">{</span>
<span class="go">    &#39;type&#39; : &#39;snvs_indels&#39;,</span>
<span class="go">    &#39;gene&#39; : &#39;BRAF&#39;,</span>
<span class="go">    &#39;identifier&#39; : &#39;COSM476&#39;,</span>
<span class="go">    &#39;exon&#39; : &#39;15&#39;,</span>
<span class="go">    &#39;function&#39; : &#39;missense&#39; ,</span>
<span class="go">    &#39;oncominevariantclass&#39; : &#39;Hotspot&#39;</span>
<span class="go">}</span>
<span class="go">self.map_amoi(variant)</span>
<span class="go">[&#39;EAY131-Y(e)&#39;, &#39;EAY131-P(e)&#39;, &#39;EAY131-N(e)&#39;, &#39;EAY131-H(i)&#39;]</span>
</pre></div>
</div>
<div class="admonition-todo admonition" id="index-3">
<p class="first admonition-title">Todo</p>
<p class="last">Check the examples work.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_arms.TreatmentArms.map_drug_arm">
<code class="descname">map_drug_arm</code><span class="sig-paren">(</span><em>armid=None</em>, <em>drugname=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_arms.html#TreatmentArms.map_drug_arm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_arms.TreatmentArms.map_drug_arm" title="Permalink to this definition">¶</a></dt>
<dd><p>Input an Arm ID or a drug name, and retun a tuple of arm, drugname, and
ID. If no arm ID or drug name is input, will return a whole table of all
arm data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>armid</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Offcial NCI-MATCH Arm ID in the form of <cite>EAY131-xxx</cite> (e.g.
‘EAY131-Z1A’).</li>
<li><strong>drugname</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Drug name as registered in the NCI-MATCH subprotocols.
Right now, required to have the full string (e.g. ‘MLN0128(TAK-228)’
or, unfortunately, ‘Sunitinib malate (SU011248 L-malate)’), but
will work on a regex to help make this easier later on.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">List of tuples or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">map_drug_arm</span><span class="p">(</span><span class="n">armid</span><span class="o">=</span><span class="s1">&#39;EAY131-Z1A&#39;</span><span class="p">)</span>
<span class="go">(u&#39;EAY131-Z1A&#39;, &#39;Binimetinib&#39;, u&#39;788187&#39;)</span>
</pre></div>
</div>
<div class="admonition-todo admonition" id="index-4">
<p class="first admonition-title">Todo</p>
<p class="last">Write regex for drug name mapping so that we don’t need to deal with
long, cryptic strings.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_arms.TreatmentArms.get_exclusion_disease">
<code class="descname">get_exclusion_disease</code><span class="sig-paren">(</span><em>armid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_arms.html#TreatmentArms.get_exclusion_disease"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_arms.TreatmentArms.get_exclusion_disease" title="Permalink to this definition">¶</a></dt>
<dd><p>Input an arm ID and return a list of exclusionary diseases for the arm,
if there are any. Otherwise return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>armid</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Full identifier of the arm to be queried.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of exclusionary diseases for the arm, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if there
aren’t any.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_exclusion_disease</span><span class="p">(</span><span class="s1">&#39;EAY131-Z1A&#39;</span><span class="p">)</span>
<span class="go">[u&#39;Melanoma&#39;, u&#39;Colorectal Cancer&#39;]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_exclusion_disease</span><span class="p">(</span><span class="s1">&#39;EAY131-Y&#39;</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matchbox_api_utils.match_arms.TreatmentArms.get_amois_by_arm">
<code class="descname">get_amois_by_arm</code><span class="sig-paren">(</span><em>arm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matchbox_api_utils/match_arms.html#TreatmentArms.get_amois_by_arm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matchbox_api_utils.match_arms.TreatmentArms.get_amois_by_arm" title="Permalink to this definition">¶</a></dt>
<dd><p>Input an arm identifier and return a list of aMOIs for the arm broken
down by category.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>arm</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Arm identifier to query</td>
</tr>
</tbody>
</table>
<p>Returns:</p>
<div class="admonition-todo admonition" id="index-5">
<p class="first admonition-title">Todo</p>
<p class="last">Need to finish implementing this method.  Currently only dumping a
dict.</p>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="helper_scripts.html" class="btn btn-neutral" title="3. MATCHBox API Utils Helper Scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Dave Sims.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>